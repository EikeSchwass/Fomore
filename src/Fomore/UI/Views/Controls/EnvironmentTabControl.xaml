<UserControl x:Class="Fomore.UI.Views.Controls.EnvironmentTabControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:navigation="clr-namespace:Fomore.UI.ViewModel.Navigation"
             mc:Ignorable="d" 
             d:DesignHeight="450" d:DesignWidth="800" d:DataContext="{d:DesignInstance navigation:EnvironmentTabVM}">

    <UserControl.Resources>
        <DataTemplate x:Key="DetailTemplate">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition/>
                    <RowDefinition/>
                </Grid.RowDefinitions>
                <TextBlock Grid.Row="0" Text="{Binding Path=EnvironmentName}"/>
                <TextBlock Grid.Row="1" Text="{Binding Path=EnterDescription}" />
            </Grid>
        </DataTemplate>

        <DataTemplate x:Key="DetailTemplate2">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition/>
                    <RowDefinition/>
                    <RowDefinition/>
                    <RowDefinition/>
                </Grid.RowDefinitions>
                
                <TextBlock Grid.Row="0" Margin="5" Text="{Binding Path=Terrain}"/>
                <TextBox Grid.Row="0" Padding="1" Margin="3" Text="{Binding Path=Terrain, Mode=OneWay}"  />

                <TextBlock Grid.Row="1" Margin="5" Text="{Binding Path=GroundType}"/>
                <TextBox Grid.Row="1" Padding="1" Margin="3" Text="{Binding Path=GroundType, Mode=OneWay}"  />

                <TextBlock Grid.Row="2" Margin="5" Text="{Binding Path=Gravity}"/>
                <TextBox Grid.Row="2" Padding="1" Margin="3" Text="{Binding Path=Gravity, Mode=OneWay}"  />

                <TextBlock Grid.Row="3" Margin="5" Text="{Binding Path=Friction}"/>
                <TextBox Grid.Row="3" Padding="1" Margin="3" Text="{Binding Path=Friction, Mode=OneWay}"  />
            </Grid>
        </DataTemplate>

    </UserControl.Resources>

    <Grid>
        <StackPanel >
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <StackPanel Grid.Column="0" Grid.Row="0">
                    <Button Content="Add New Environment" Command="{Binding ShowEnvironCreationDialogCommand}" />
                </StackPanel>

                <StackPanel Grid.Column="0" Grid.Row="1">
                    <ListBox ItemsSource="{Binding Path=EntitiesStorage.Environments}"/>
                </StackPanel>

                <StackPanel Margin="15" Grid.Column="1" Grid.Row="0">
                    <ListBox Width="200" IsSynchronizedWithCurrentItem="True"
                             ItemsSource="{Binding}"/>
                    <ContentControl Content="{Binding}"
                                    ContentTemplate="{StaticResource DetailTemplate}"/>
                </StackPanel>

                <StackPanel Margin="10" Grid.Column="1" Grid.Row="1">
                    <ListBox Width="200" IsSynchronizedWithCurrentItem="True"
                             ItemsSource="{Binding}"/>
                    <ContentControl Content="{Binding}"
                                    ContentTemplate="{StaticResource DetailTemplate2}"/>
                </StackPanel>
            </Grid>
        </StackPanel>


        <Grid Visibility="{Binding Path=CreateEnvironmentDialogVM.Visibility}">
            <Grid Background="Black" Opacity="0.5"/>
            <Border
                MinWidth="400"
                Background="{StaticResource Level2Brush}" 
                BorderBrush="Black" 
                BorderThickness="1" 
                CornerRadius="0,55,0,55" 
                HorizontalAlignment="Center" 
                VerticalAlignment="Center">
                <StackPanel>
                    <TextBlock Margin="5" Text="{Binding Path=Header}" FontWeight="Bold" FontFamily="Cambria" />

                    <TextBlock Margin="5" Text="{Binding Path=EnvironmentName}"/>
                    <TextBox Padding="1" Margin="3" Text="{Binding Path=CreateEnvironmentDialogVM.EnvironmentName, Mode=TwoWay}"  />

                    <TextBlock Margin="5" Text="{Binding Path=Description}"/>
                    <TextBox  Padding="1" Margin="3" Text="{Binding Path=CreateEnvironmentDialogVM.EnvironmentDescription, Mode=TwoWay}"  />

                    <!-- In my opinion the user shouldn't be forced to make all these settings right now. The name and the description should sufficient to create an environment.
                    After the user created the environment the environment should be selected and then the user should be able to do the advanced settings in the panel on the right (see Dominicks wireframes).
                    
                    <TextBlock Margin="5" Text="{Binding Path=Terrain}"/>
                    <TextBox  Padding="1" Margin="3" Text="{Binding Path=Terrain, Mode=OneWay}"  />

                    <TextBlock Margin="5" Text="{Binding Path=GroundType}"/>
                    <TextBox  Padding="1" Margin="3" Text="{Binding Path=GroundType, Mode=OneWay}"  />

                    <TextBlock Margin="5" Text="{Binding Path=Gravity}"/>
                    <TextBox  Padding="1" Margin="3" Text="{Binding Path=Gravity, Mode=OneWay}"  />

                    <TextBlock Margin="5" Text="{Binding Path=Friction}"/>
                    <TextBox  Padding="1" Margin="3" Text="{Binding Path=Friction, Mode=OneWay}"  />
                    
                    -->

                    <Button Margin="5" Content="{Binding Path=CreateButton}" Command="{Binding Path=CreateEnvironmentDialogVM.CreateEnvironmentCommand}" Background="{x:Null}" />

                    <Button Margin="5" Content="{Binding Path=CancelButton}" Command="{Binding Path=CreateEnvironmentDialogVM.CancelEnvironmentCreationCommand}" Background="{x:Null}" />

                </StackPanel>
            </Border>
        </Grid>











    </Grid>
</UserControl>
